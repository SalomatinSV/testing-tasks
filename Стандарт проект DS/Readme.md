# Задание 1

В базе данных PG (Postgre) cуществуют 2 таблицы:

1. Таблица "opers", с операциями по обработке нарушений. В ней хранится информация по всем операциям обработки нарушений.

  | Column | Описание | Description &nbsp; &nbsp; |
|---|---|---|
| viol_oper_id  |  bigint (PK)    | Идентификатор операции обработки нарушения ПДД |
| tr_viol_id | bigint | Идентификатор нарушения ПДД | 
| oper_code | integer  | Тип операции обработки нарушения ПДД | 
| refuse_code | integer | Результирующий код операции обработки нарушения ПДД | 
| isp_id | bigint | Идентификатор того, кто произвел обработку нарушения ПДД | 
| date_oper | timestamp(0) without time zone | Дата и время операции обработки нарушения ПДД | 
| viol_datetime | timestamp(0) without time zone | Дата и время нарушения ПДД |

2. Таблица "viols", с нарушениями правил дорожного движения транспортными средствами.

  | Column | Описание | Description &nbsp; &nbsp; |
|---|---|---|
| tr_viol_id | bigint (PK) | Идентификатор нарушения ПДД | 
| viol_code | integer  | Код нарушения ПДД | 
| time_check | timestamp(0) without time zone | Дата и время нарушения ПДД | 
| stage_code | integer | Этап обработки нарушения ПДД | 
| refuse_code | integer | Результирующий код обработки нарушения ПДД | 
| camera_id | integer | Идентификатор камеры зафиксировавший нарушение ПДД |

Есть задача:
Подготовить выгрузку, содержащую информацию, за период нарушения ПДД с 2018-04-01 по 2018-04-20 с детализацией до даты нарушения. Выгрузка должна содержать атрибуты:
    Дата нарушения ПДД;
    Число нарушений ПДД всего;
    Число нарушений ПДД у которых результирующий код обработки нарушения ПДД равен 0;
    Число нарушений ПДД по которым была операция обработки тип 29;
    Число нарушений ПДД по которым не было операции обработки тип 29, а результирующий код обработки нарушения ПДД равен 0;


Вам необходимо:
1. Описать последовательность действий для выполнения задачи, постарайтесь развернуто ответить почему так и в такой последовательности.
2. Для этой задачи подготовьте все варианты запросов, которые позволят произвести соответствующую выгрузку.
3. Укажите лучший вариант запроса для данной задачи, дайте комментарий почему именно такой запрос.


# Задание 2

Описание ситуации:
Существует процесс обработки нарушений, формируемых камерами фото и видео фиксации. Камеры детектируют различные нарушения и формируют материалы нарушения, при этом распознают номерной знак (ГРЗ, государственный регистрационный знак) транспортного средства (ТС). После этого все нарушения анализируются компетентным сотрудником (оператором) и принимается решение: оформить нарушение, или забраковать с некоторой причиной. В случае если ГРЗ распознан камерой неверно, то по нарушению получены не корректные данные о собственнике и сотрудник может изменить ГРЗ и получить корректные данные, что требует дополнительных сил и времени от сотрудника.
В существующий процесс внедрен дополнительный механизм обработки изображения ГРЗ другим математическим алгоритмом до того как материал будет передан оператору, ожидается, что использование ГРЗ от нового алгоритма позволит уменьшить кол-во замен ГРЗ оператором.

Цель:
Минимизировать трудозатраты сотрудников по замене ГРЗ

Для этого необходимо:
1. Сформировать правило (определить условия) по которому нужно изменять ГРЗ с распознанного камерой, на распознанный новым математическим аппаратом.
2. Указать и обосновать критерии корректности замены ГРЗ.
3. Оценить качество работы правила, указать экономию операций по замене ГРЗ.


Описание полей данных:

`id`              --идентификатор нарушения

`camera_id`       --идентификатор камеры сформировавшей нарушение

`time_check`      --время фиксации нарушения

`regno_recognize` --ГРЗ распознанный камерой

`regno_ai`        --ГРЗ распознанный новым математическим алгоритмом

`regno`           --ГРЗ в итоге процесса обработки нарушения (по умолчанию он равен regno_recognize, если не изменялся оператором)

`result_code`     --финальный код результата обработки нарушения (подробная расшифровка ниже)

`symbols`         --ГРЗ распознанный новым математическим алгоритмом, по символьно

`symbol_scores`   --скор уверенности нового мат. алгоритма по каждому символу из symbols (значения от 0 до 1)

`length_scores`   --скор уверенности длинны ГРЗ нового мат. алгоритма начиная с длинны 0, и до длинны 10 символов (значения от 0 до 1)



Расшифровка result_code:

0 - оформлено

1 - забраковано по причине "плохо виден ГРЗ"

2 - забраковано по причине "ошибка в адресе собственника"

3 - забраковано по причине "ошибка в иных данных собственника"

4 - забраковано по причине "плохое качество изображения"

5 - забраковано по причине "иное"
